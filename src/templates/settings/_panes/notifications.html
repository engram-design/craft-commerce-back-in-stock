{% import '_includes/forms' as forms %}
{% import 'verbb-base/_macros' as macros %}

{{ forms.lightswitchField({
    label: 'Confirmation Email' | t('craft-commerce-back-in-stock'),
    instructions: 'Whether a confirmation email should be sent to the customer if they request to be notified.' | t('craft-commerce-back-in-stock'),
    name: 'sendConfirmation',
    on: settings.sendConfirmation,
    errors: settings.getErrors('confirmationEmailTemplate'),
    toggle: '.confirmation-email-settings',
}) }}

<div class="confirmation-email-settings {{ not settings.confirmationEmailTemplate ? 'hidden' }}">
    {{ forms.textField({
        label: 'Confirmation Email Template' | t('craft-commerce-back-in-stock'),
        instructions: 'Use a custom template for the confirmation email.' | t('craft-commerce-back-in-stock'),
        name: 'confirmationEmailTemplate',
        value: settings.confirmationEmailTemplate,
        placeholder: 'craft-commerce-back-in-stock/emails/confirmation',
        errors: settings.getErrors('confirmationEmailTemplate'),
    }) }}

    {{ forms.textField({
        label: 'Confirmation Email Subject' | t('craft-commerce-back-in-stock'),
        instructions: 'The email subject for the confirmation email.' | t('craft-commerce-back-in-stock'),
        name: 'confirmationEmailSubject',
        value: settings.confirmationEmailSubject,
        placeholder: 'Back in stock notification confirmation for {{ variant.title }}' | t('craft-commerce-back-in-stock'),
        errors: settings.getErrors('confirmationEmailSubject'),
    }) }}
</div>

{{ forms.textField({
    label: 'Notification Email Template' | t('craft-commerce-back-in-stock'),
    instructions: 'Use a custom template for the notification email.' | t('craft-commerce-back-in-stock'),
    name: 'emailTemplate',
    value: settings.emailTemplate,
    placeholder: 'craft-commerce-back-in-stock/emails/notification',
    errors: settings.getErrors('emailTemplate'),
}) }}

{{ forms.textField({
    label: 'Notification Email Subject' | t('craft-commerce-back-in-stock'),
    instructions: 'The email subject for the notification email.' | t('craft-commerce-back-in-stock'),
    name: 'emailSubject',
    value: settings.emailSubject,
    placeholder: 'Order today, {{ variant.title }} is now in stock' | t('craft-commerce-back-in-stock'),
    errors: settings.getErrors('emailSubject'),
}) }}

{{ forms.lightswitchField({
    label: 'Purge Notification Requests' | t('craft-commerce-back-in-stock'),
    instructions: 'Purge notification requests from the database when a notification is successfully sent.' | t('craft-commerce-back-in-stock'),
    name: 'purgeRequests',
    on: settings.purgeRequests,
    errors: settings.getErrors('purgeRequests'),
}) }}
